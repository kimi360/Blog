<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    
    <title>Nginx编译找不到OpenSSL library | Kimi&#39;s Blog</title>

    <meta name="description" content="&lt;h2 id=&#34;基本情况&#34;&gt;&lt;a href=&#34;#基本情况&#34; class=&#34;headerlink&#34; title=&#34;基本情况&#34;&gt;&lt;/a&gt;基本情况&lt;/h2&gt;&lt;p&gt;因为需要使用https模块，因此在编译Nginx时添加了–with-http_ssl_module。结果编译过程中报错。&lt;/p&gt;">
    <meta name="keywords" content="">

    

    <meta property="og:locale" content="cn" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content= "Nginx编译找不到OpenSSL library | Kimi&#39;s Blog"  />
    <meta property="og:description" content= "&lt;h2 id=&#34;基本情况&#34;&gt;&lt;a href=&#34;#基本情况&#34; class=&#34;headerlink&#34; title=&#34;基本情况&#34;&gt;&lt;/a&gt;基本情况&lt;/h2&gt;&lt;p&gt;因为需要使用https模块，因此在编译Nginx时添加了–with-http_ssl_module。结果编译过程中报错。&lt;/p&gt;" />
    <meta property="og:url" content="https://blog.kimi360.top/2e04a82fe9f6/index.html" />
    <meta property="og:site_name" content="" />
    <meta property="article:author" content="KIMI" />
    <meta property="article:publisher" content="" />
    <meta property="og:description" content="&lt;h2 id=&#34;基本情况&#34;&gt;&lt;a href=&#34;#基本情况&#34; class=&#34;headerlink&#34; title=&#34;基本情况&#34;&gt;&lt;/a&gt;基本情况&lt;/h2&gt;&lt;p&gt;因为需要使用https模块，因此在编译Nginx时添加了–with-http_ssl_module。结果编译过程中报错。&lt;/p&gt;" />
    <meta name="twitter:title" content="Nginx编译找不到OpenSSL library | Kimi&#39;s Blog"/>
    <meta name="twitter:description" content="&lt;h2 id=&#34;基本情况&#34;&gt;&lt;a href=&#34;#基本情况&#34; class=&#34;headerlink&#34; title=&#34;基本情况&#34;&gt;&lt;/a&gt;基本情况&lt;/h2&gt;&lt;p&gt;因为需要使用https模块，因此在编译Nginx时添加了–with-http_ssl_module。结果编译过程中报错。&lt;/p&gt;"/>
    <script type="application/ld+json">
        {
            "description": "&lt;h2 id=&#34;基本情况&#34;&gt;&lt;a href=&#34;#基本情况&#34; class=&#34;headerlink&#34; title=&#34;基本情况&#34;&gt;&lt;/a&gt;基本情况&lt;/h2&gt;&lt;p&gt;因为需要使用https模块，因此在编译Nginx时添加了–with-http_ssl_module。结果编译过程中报错。&lt;/p&gt;",
            "author": { "@type": "Person", "name": "KIMI" },
            "@type": "BlogPosting",
            "url": "https://blog.kimi360.top/2e04a82fe9f6/index.html",
            "publisher": {
            "@type": "Organization",
            "logo": {
                "@type": "ImageObject",
                "url": "https://blog.kimi360.topundefined"
            },
            "name": "KIMI"
            },
            "headline": "Nginx编译找不到OpenSSL library | Kimi&#39;s Blog",
            "datePublished": "2023-01-02T12:15:57.000Z",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://blog.kimi360.top/2e04a82fe9f6/index.html"
            },
            "@context": "http://schema.org"
        }
    </script>




    

    

    

    
    <link rel="icon" href="/images/icon/favicon.png">
    

    

    

    

    
<link rel="stylesheet" href="../dist/build.css?v=1654266144177.css">


    
<link rel="stylesheet" href="../dist/custom.css?v=1654266144177.css">


    <script>
        window.isPost = true
        window.aomori = {
            
            
            
        }
        window.aomori_logo_typed_animated = false
        window.aomori_search_algolia = false

    </script>

<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="rss.xml" title="Kimi's Blog" type="application/rss+xml">
</head>

<body>

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-inner">
                
                    <a class="header-type-title" href="/">Kimi&#39;s Blog</a>
                
    
                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="../index.html">首页</a>
                
                <a href="../wishlist">愿望</a>
                
                <a href="../archives">存档</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="https://github.com/kimi360">
        <ion-icon name="logo-github"></ion-icon>
    </a>

    <a class="social" target="_blank" href="/rss.xml">
        <ion-icon name="logo-rss"></ion-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="../index.html">首页</a>
                    
                    <a href="../wishlist">愿望</a>
                    
                    <a href="../archives">存档</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

    <div class="container">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="post">
    <article id="post-clrud7o6x00096sjobvv412yr" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
          

<div class="swiper-container article-gallery">
  <div class="swiper-wrapper">
    
      <div class="swiper-slide">
        <img src="../images/banner/nginx_build_openssl.png" itemprop="image">
      </div>
    
  </div>
  <!-- 如果需要分页器 -->
  <div class="swiper-pagination"></div>
</div>


        
        
        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      Nginx编译找不到OpenSSL library
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2023-01-02T12:15:57.000Z" itemprop="datePublished">2023-01-02</time>
</div>

            
            <div class="article-category">
                <a class="article-category-link" href="../categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a>
            </div>
            

            

            

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <h2 id="基本情况"><a href="#基本情况" class="headerlink" title="基本情况"></a>基本情况</h2><p>因为需要使用https模块，因此在编译Nginx时添加了–with-http_ssl_module。结果编译过程中报错。</p>
<span id="more"></span>
<pre><code class="bash">checking for OpenSSL library ... not found
checking for OpenSSL library in /usr/local/ ... not found
checking for OpenSSL library in /usr/pkg/ ... not found
checking for OpenSSL library in /opt/local/ ... not found

./configure: error: SSL modules require the OpenSSL library.
You can either do not enable the modules, or install the OpenSSL library
into the system, or build the OpenSSL library statically from the source
with nginx by using --with-openssl=&lt;path&gt; option.
</code></pre>
<p>可是openssl-devel已经安装了，通过rpm命令也能找到</p>
<pre><code class="bash">[root@fc-proxy nginx-1.23.3]# which openssl
/usr/bin/openssl
[root@fc-proxy nginx-1.23.3]# rpm -qa | grep openssl
openssl-1.0.2k-25.el7_9.x86_64
openssl-libs-1.0.2k-25.el7_9.x86_64
openssl-devel-1.0.2k-25.el7_9.x86_64
</code></pre>
<p>谷歌得到的答案大多数归结于两点：</p>
<ul>
<li>没安装openssl-devel, 可是我已经装了呀</li>
<li>编译安装openssl并指定路径，nginx编译时添加–with-openssl，可是我已经装了呀，为啥要再装一次</li>
</ul>
<h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><p>直到看到这篇文章：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ed4a66be0c8a">nginx升级及遇到的问题error: SSL modules解决方法</a></p>
<p>看起来应该是编译时一些文件没有找到，通过find命令查找一下 <code>ssl.h</code> , <code>libssl.a</code> , <code>libcrypto.a</code> 这几个文件</p>
<pre><code class="bash">[root@fc-proxy nginx-1.23.3]# find / -name ssl.h
/root/openssl-1.1.1q/include/openssl/ssl.h
/usr/include/openssl/ssl.h
/usr/local/include/openssl/ssl.h
[root@fc-proxy lib]# find / -name libssl.a                              
/root/openssl-1.1.1q/libssl.a
/usr/local/lib64/libssl.a
[root@fc-proxy lib]# find / -name libcrypto.a
/root/openssl-1.1.1q/libcrypto.a
/usr/local/lib64/libcrypto.a
</code></pre>
<p>看起来相关的文件都在 <code>/root/openssl-1.1.1q</code> ，编译时添加<code>--with-http_ssl_module=/root/openssl-1.1.1q</code></p>
<pre><code class="bash">[root@fc-proxy nginx-1.23.3]# ./configure --with-http_ssl_module --with-openssl=/root/openssl-1.1.1q
……
[root@fc-proxy nginx-1.23.3]# make&amp;&amp; make install
……
</code></pre>
<p>顺利编译通过，问题解决。</p>

            
    <div class="article-donate">
        <iframe src="https://sponsor.kimi360.top/index.html" frameborder="0" scrolling="no"></iframe>
    </div>

        </div>

    </div>
    

    

    
  <div class="article-refer hairline">
    <h3> 参考文献 </h3>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://www.jianshu.com/p/ed4a66be0c8a">nginx升级及遇到的问题error: SSL modules解决方法</a>
    </p>
    
  </div>
  

    
  <div class="article-copyright hairline">
    <p>
      本文链接 <a rel="nofollow" href="https://blog.kimi360.top/2e04a82fe9f6/">https://blog.kimi360.top/2e04a82fe9f6/</a>
    </p>
    
    <p>
      本文采用  <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议 (CC BY-NC-ND 4.0)</a> 进行许可。
    </p>
  </div>
  

    

    
<nav class="article-nav">
  
    <a href="../0a150ad679fb/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">下一篇</div>
      <div class="article-nav-title">
        
          为博客添加赞助按钮遇到的坑
        
      </div>
    </a>
  
  
    <a href="../e2efe6bded91/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">上一篇</div>
      <div class="article-nav-title">Linux使用proxychains-ng代理应用</div>
    </a>
  
</nav>


    <section class="share">
        <div class="share-title">分享</div>
        <a class="share-item" target="_blank"
            href="https://twitter.com/share?text=Nginx编译找不到OpenSSL library - Kimi's Blog&url=https%3A%2F%2Fblog.kimi360.top%2F2e04a82fe9f6%2F">
            <ion-icon name="logo-twitter"></ion-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://www.facebook.com/sharer.php?title=Nginx编译找不到OpenSSL library - Kimi's Blog&u=https%3A%2F%2Fblog.kimi360.top%2F2e04a82fe9f6%2F">
            <ion-icon name="logo-facebook"></ion-icon>
        </a>
        <!-- <a class="share-item" target="_blank"
            href="https://service.weibo.com/share/share.php?title=Nginx编译找不到OpenSSL library - Kimi's Blog&url=https://blog.kimi360.top/2e04a82fe9f6/&pic=">
            <div class="n-icon n-icon-weibo"></div>
        </a> -->
    </section>

</article>














<section class="comments">
    <div class="giscus"></div>
</section>
<script src="https://giscus.app/client.js"
    data-repo="kimi360/Blog"
    data-repo-id="R_kgDOLGQqlQ"
    data-category="Announcements"
    data-category-id="DIC_kwDOLGQqlc4CcfzK"
    data-mapping="url"
    data-reactions-enabled="0"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="zh-CN"
    crossorigin="anonymous"
    async>
</script>



</div>
                </section>
            </section>

            
            <aside class="sidebar ">
                


<div class="widget" id="widget">
    
      
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></li></ul>
    </div>
  </div>


    
      

    
      
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="../1ad1547eaf1c/">使用命令行更新群晖的SSL证书</a>
          </li>
        
          <li>
            <a href="../97a24c5b2e7e/">脚本设置开始菜单显示的文件夹</a>
          </li>
        
          <li>
            <a href="../f81afbfec24f/">SecureCRT自动输入二次认证码</a>
          </li>
        
          <li>
            <a href="../bc04bb10b5b1/">使用非ROOT用户挂载ossfs</a>
          </li>
        
          <li>
            <a href="../4c0e267c54ce/">Windows下使用密钥管理git账号</a>
          </li>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2024/">2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2023/">2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2022/">2022</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
            
        </div>
    </div>

    <footer class="footer">
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#3c4859" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <!-- Please do not remove this -->
    <!-- 开源不易，请勿删除 -->
    <div class="footer-wrap">
        <div class="footer-inner"> 
            Copyright &copy; 2022 ~ 2024 <a href="https://github.com/kimi360" target="_blank">KIMI</a><br>
            Powered By <a href="https://hexo.io/" target="_blank">Hexo</a> · Theme By <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a>
        </div>
    </div>

</footer>

<script type="module" src="https://unpkg.com/ionicons@6.0.2/dist/ionicons/ionicons.esm.js"></script>






<script src="../dist/build.js?1654266144177.js"></script>


<script src="../dist/custom.js?1654266144177.js"></script>













</body>

</html>